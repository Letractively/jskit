<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>Jskit Date Selector</title>
       <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" href="../main.css">
        <script src="../../JskitLoad.js">
        </script>
        <script src="../../page/JskitTable.js">
        </script>
        <script src="../../base/JskitCalendar.js">
        </script>
        <style>
            .tableCssClass {
                border: #000000 solid 1px;
                border-collapse: collapse;
            }
            
            .tableCssClass TD {
                border: #000000 solid 1px;
                font-family: verdana;
            }
            
            .theadCssClass {
                border: #000000 solid 1px;
                border-collapse: collapse;
            }
            
            .theadCssClass TD {
                font-size: 12px;
                font-weight: bold;
                color: #ffff00;
                text-align: center;
                border: #000000 solid 1px;
                border-collapse: collapse;
                padding: 5px 5px 5px 5px;
                background-color: #336699;
                width: 30px;
            }
            
            .tbodyCssClass {
                border: #000000 solid 1px;
                border-collapse: collapse;
                background-color: #eeeeee;
            }
            
            .tbodyCssClass TD {
                font-size: 12px;
                font-weight: bold;
				text-align:center;
                border: #000000 solid 1px;
                border-collapse: collapse;
                padding: 5px 5px 5px 5px;
            }
			.weekend{
				background-color:#ffffd0;
			}
        </style>
        <script>
        	var jc = new JskitCalendar();
            var jt = new JskitTable();
            
            jt.setTableCssClass("tableCssClass");
            jt.setTHeadCssClass("theadCssClass");
            jt.setTBodyCssClass("tbodyCssClass");
            
            jt.setColumns("日", "一", "二","三","四","五","六");
			jt.setColumnCssClass("日","weekend");
			jt.setColumnCssClass("六","weekend");
            
			jt.setAction("onclick","dateSelect");
			
			var mDayListInCalendar = null;
			var mCb = jskitUtil.url.get("cb");
			function drawCalendar(){
				mDayListInCalendar = jc.getCalendarList();
				for(var i=0;i<mDayListInCalendar.length;i++){
					var _w = mDayListInCalendar[i];
		            jt.insert(convertDayCell(_w[0]),convertDayCell(_w[1]),convertDayCell(_w[2]),convertDayCell(_w[3]),convertDayCell(_w[4]),convertDayCell(_w[5]),convertDayCell(_w[6]));
				}
				$$("#canvas").innerHTML = jt.getTable();
				$$("#info").innerHTML = jc.getYear()+"-"+jc.getMonth();
			}
			function convertDayCell(day){
				if(day=="")return "";
				jc.lunar.parse(jc.getYear(),jc.getMonth(),day);
				var _lf = jc.lunar.getFestival();
				return day + "<br>" + _lf;
			}
			function goNext(){
				jc.nextMonth();
	            jt.clear();
				drawCalendar();
			}
			function goPrev(){
				jc.prevMonth();
	            jt.clear();
				drawCalendar();
			}
			function dateSelect(obj){
				var _lunar = "";
				var _year = jc.getYear();
				var _month = jc.getMonth();
				var _row = obj.getAttribute("row").toInt(0);
				var _col = obj.getAttribute("col").toInt(0);
				var _day = mDayListInCalendar[_row][_col];
				if(!isNaN(_day)){
					jc.lunar.parse(jc.getYear(),jc.getMonth(),_day);
					_lunar = jc.lunar.date["GanzhiYear"]+"年" + jc.lunar.date["MonthText"]+"月" + jc.lunar.date["DayText"];  
				}else{
					_lunar = "error";
				}
				
			}
        </script>
	</head>
	<body>
		<div id="info"></div>
		<div id="canvas"></div>
	</body>
</html>
